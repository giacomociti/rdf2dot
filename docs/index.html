<!doctype html>
<html>
<head>
  <title>Rdf Viewer</title>
  <meta http-equiv='Content-Type' content='text/html; charset=utf-8'>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" href="rdf_flyer.24" />
</head>
<body>
    <!-- (A) LOAD FILE SAVER -->
    <!-- https://cdnjs.com/libraries/FileSaver.js -->
    <!-- https://github.com/eligrey/FileSaver.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="https://unpkg.com/@hpcc-js/wasm/dist/index.min.js" type="javascript/worker"></script>
    <input id="file" type="file" accept=".ttl,.trig,.nt,.nq">
    <br>
    <button id="save">Save</button>
    <br>
    <div id="graph" style="text-align: center;" /> 
    <script src="bundle.js"></script>
    <script>
      const fileInput = document.getElementById("file");
      const saveButton = document.getElementById("save");
      fileInput.addEventListener("change", () => {
          const [file] = fileInput.files;
          if (file) {
              const reader = new FileReader();
              reader.addEventListener("load", () => {
                  console.log(reader.result);
                  App.render(reader.result, "#graph");
              });
              reader.readAsText(file);
          }
      });
      saveButton.addEventListener("click", () => {
          const svg = document.getElementsByTagName('svg')[0]
          const myFile = new File([svg.outerHTML], "rdf.svg", {type: "image/svg+xml"});
          saveAs(myFile);
      });    
    </script>
</body>
</html>